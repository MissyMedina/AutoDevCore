<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoDevCore Thought Trail Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        .content {
            padding: 30px;
        }
        .section {
            margin-bottom: 40px;
            padding: 20px;
            border-radius: 10px;
            background: #f8f9fa;
            border-left: 4px solid #667eea;
        }
        .section h2 {
            color: #333;
            margin-top: 0;
            font-size: 1.5em;
        }
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #667eea;
        }
        .timeline-item {
            position: relative;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -22px;
            top: 20px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #667eea;
            border: 3px solid white;
        }
        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .agent {
            font-weight: bold;
            color: #667eea;
            font-size: 1.1em;
        }
        .timestamp {
            color: #666;
            font-size: 0.9em;
        }
        .thought {
            color: #333;
            line-height: 1.5;
        }
        .data-preview {
            margin-top: 10px;
            padding: 10px;
            background: #f1f3f4;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.9em;
            color: #555;
            max-height: 100px;
            overflow-y: auto;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        .stat-label {
            color: #666;
            margin-top: 5px;
        }
        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-primary:hover {
            background: #5a6fd8;
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        .btn-secondary:hover {
            background: #5a6268;
        }
        .filter-section {
            margin-bottom: 20px;
        }
        .filter-section label {
            margin-right: 10px;
            font-weight: bold;
        }
        .filter-section select {
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .mermaid-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ AutoDevCore Thought Trail</h1>
            <p>Visualizing AI Agent Reasoning and Decision Making</p>
        </div>
        
        <div class="content">
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="total-thoughts">0</div>
                    <div class="stat-label">Total Thoughts</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="unique-agents">0</div>
                    <div class="stat-label">Unique Agents</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avg-thought-length">0</div>
                    <div class="stat-label">Avg Thought Length</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="analysis-duration">0s</div>
                    <div class="stat-label">Analysis Duration</div>
                </div>
            </div>
            
            <div class="section">
                <h2>üéõÔ∏è Controls & Filters</h2>
                <div class="controls">
                    <button class="btn btn-primary" onclick="exportToJSON()">Export JSON</button>
                    <button class="btn btn-secondary" onclick="exportToCSV()">Export CSV</button>
                    <button class="btn btn-secondary" onclick="toggleDataPreview()">Toggle Data Preview</button>
                </div>
                <div class="filter-section">
                    <label>Filter by Agent:</label>
                    <select id="agent-filter" onchange="filterByAgent()">
                        <option value="">All Agents</option>
                    </select>
                </div>
            </div>
            
            <div class="section">
                <h2>üìä Agent Activity Chart</h2>
                <canvas id="agentChart" width="400" height="200"></canvas>
            </div>
            
            <div class="section">
                <h2>üïí Timeline View</h2>
                <div class="timeline" id="timeline">
                    <!-- Timeline items will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="section">
                <h2>üîó Thought Flow Diagram</h2>
                <div class="mermaid-container">
                    <div class="mermaid" id="mermaid-diagram">
                        <!-- Mermaid diagram will be rendered here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize thought trail data
        const thoughtTrail = [
  {
    "timestamp": "2025-08-10T00:43:32.635431",
    "agent": "JournalAgent",
    "thought": "Starting intelligent codebase analysis of secure_app_test/SecureTaskApp",
    "data": {},
    "id": 0
  },
  {
    "timestamp": "2025-08-10T00:43:32.635491",
    "agent": "JournalAgent",
    "thought": "Performing comprehensive codebase scan",
    "data": {},
    "id": 1
  },
  {
    "timestamp": "2025-08-10T00:43:32.666020",
    "agent": "JournalAgent",
    "thought": "Codebase metrics calculated",
    "data": {
      "file_count": 22,
      "line_count": 913,
      "code_lines": 632,
      "comment_lines": 92,
      "blank_lines": 189,
      "languages": {
        "Python": 16
      },
      "file_types": {
        ".txt": 2,
        ".py": 16,
        ".md": 1,
        ".example": 1
      },
      "complexity_metrics": {
        "average_function_length": 3.6666666666666665,
        "average_class_length": 4.818181818181818,
        "max_nesting_depth": 1
      }
    },
    "id": 2
  },
  {
    "timestamp": "2025-08-10T00:43:32.666315",
    "agent": "JournalAgent",
    "thought": "Analyzing technical debt",
    "data": {},
    "id": 3
  },
  {
    "timestamp": "2025-08-10T00:43:32.692119",
    "agent": "JournalAgent",
    "thought": "Technical debt analysis complete",
    "data": {
      "code_smells": [],
      "anti_patterns": [],
      "duplicate_code": [],
      "complexity_issues": [],
      "maintenance_issues": [],
      "debt_score": 0
    },
    "id": 4
  },
  {
    "timestamp": "2025-08-10T00:43:32.692241",
    "agent": "JournalAgent",
    "thought": "Analyzing performance patterns",
    "data": {},
    "id": 5
  },
  {
    "timestamp": "2025-08-10T00:43:32.698381",
    "agent": "JournalAgent",
    "thought": "Performance analysis complete",
    "data": {
      "database_queries": [
        "Database queries in auth.py",
        "Database queries in routes.py"
      ],
      "memory_issues": [],
      "algorithm_complexity": [
        "Nested loops in models.py",
        "Nested loops in test_main.py",
        "Nested loops in helpers.py",
        "Nested loops in validation.py",
        "Nested loops in routes.py"
      ],
      "optimization_opportunities": [],
      "performance_score": 70
    },
    "id": 6
  },
  {
    "timestamp": "2025-08-10T00:43:32.698550",
    "agent": "JournalAgent",
    "thought": "Detecting security vulnerabilities",
    "data": {},
    "id": 7
  },
  {
    "timestamp": "2025-08-10T00:43:32.707950",
    "agent": "JournalAgent",
    "thought": "Security analysis complete",
    "data": {
      "critical_vulnerabilities": [],
      "high_risk_vulnerabilities": [
        "Potential password exposure in models.py",
        "Potential password exposure in validation.py"
      ],
      "medium_risk_vulnerabilities": [
        "User input handling in validation.py"
      ],
      "low_risk_vulnerabilities": [],
      "security_score": 60
    },
    "id": 8
  },
  {
    "timestamp": "2025-08-10T00:43:32.708093",
    "agent": "JournalAgent",
    "thought": "Calculating code quality metrics",
    "data": {},
    "id": 9
  },
  {
    "timestamp": "2025-08-10T00:43:32.713489",
    "agent": "JournalAgent",
    "thought": "Quality metrics calculated",
    "data": {
      "maintainability_index": 80,
      "cyclomatic_complexity": "Low",
      "code_coverage": "Unknown",
      "documentation_coverage": 81.25,
      "test_coverage": 6.25,
      "code_style": "Good",
      "overall_quality_score": 62.125
    },
    "id": 10
  },
  {
    "timestamp": "2025-08-10T00:43:32.713614",
    "agent": "JournalAgent",
    "thought": "Generating GPT-OSS insights",
    "data": {},
    "id": 11
  },
  {
    "timestamp": "2025-08-10T00:48:32.880862",
    "agent": "JournalAgent",
    "thought": "AI insights generated",
    "data": {
      "architecture_insights": [
        "Modular structure detected",
        "Clear separation of concerns"
      ],
      "improvement_opportunities": [
        "Add comprehensive documentation",
        "Implement unit tests"
      ],
      "best_practices_assessment": {
        "overall": "Good",
        "areas_for_improvement": [
          "Documentation",
          "Testing"
        ]
      },
      "scalability_analysis": {
        "current_state": "Moderate",
        "recommendations": [
          "Add caching",
          "Optimize database queries"
        ]
      },
      "maintainability_score": 70
    },
    "id": 12
  },
  {
    "timestamp": "2025-08-10T00:48:32.883450",
    "agent": "JournalAgent",
    "thought": "Generating comprehensive journal report",
    "data": {},
    "id": 13
  },
  {
    "timestamp": "2025-08-10T00:48:32.891585",
    "agent": "JournalAgent",
    "thought": "Generating actionable recommendations",
    "data": {},
    "id": 14
  },
  {
    "timestamp": "2025-08-10T00:48:32.891833",
    "agent": "JournalAgent",
    "thought": "Recommendations generated",
    "data": {
      "immediate_actions": [],
      "short_term": [
        "Add unit tests to improve coverage"
      ],
      "long_term": [
        "Implement comprehensive code review process",
        "Set up automated code quality checks",
        "Establish coding standards and guidelines"
      ],
      "priority_score": 20
    },
    "id": 15
  }
];
        
        // Initialize Mermaid
        mermaid.initialize({ startOnLoad: true });
        
        // Calculate statistics
        function calculateStats() {
            const totalThoughts = thoughtTrail.length;
            const uniqueAgents = new Set(thoughtTrail.map(t => t.agent)).size;
            const avgLength = Math.round(thoughtTrail.reduce((sum, t) => sum + t.thought.length, 0) / totalThoughts);
            
            // Calculate duration
            const firstTime = new Date(thoughtTrail[0].timestamp);
            const lastTime = new Date(thoughtTrail[thoughtTrail.length - 1].timestamp);
            const duration = Math.round((lastTime - firstTime) / 1000);
            
            document.getElementById('total-thoughts').textContent = totalThoughts;
            document.getElementById('unique-agents').textContent = uniqueAgents;
            document.getElementById('avg-thought-length').textContent = avgLength;
            document.getElementById('analysis-duration').textContent = duration + 's';
        }
        
        // Populate agent filter
        function populateAgentFilter() {
            const agents = [...new Set(thoughtTrail.map(t => t.agent))];
            const select = document.getElementById('agent-filter');
            
            agents.forEach(agent => {
                const option = document.createElement('option');
                option.value = agent;
                option.textContent = agent;
                select.appendChild(option);
            });
        }
        
        // Render timeline
        function renderTimeline(filteredTrail = thoughtTrail) {
            const timeline = document.getElementById('timeline');
            timeline.innerHTML = '';
            
            filteredTrail.forEach(thought => {
                const item = document.createElement('div');
                item.className = 'timeline-item';
                
                const timestamp = new Date(thought.timestamp).toLocaleTimeString();
                const dataPreview = thought.data && Object.keys(thought.data).length > 0 
                    ? `<div class="data-preview">Data: ${JSON.stringify(thought.data).substring(0, 100)}...</div>`
                    : '';
                
                item.innerHTML = `
                    <div class="timeline-header">
                        <span class="agent">${thought.agent}</span>
                        <span class="timestamp">${timestamp}</span>
                    </div>
                    <div class="thought">${thought.thought}</div>
                    ${dataPreview}
                `;
                
                timeline.appendChild(item);
            });
        }
        
        // Create agent activity chart
        function createAgentChart() {
            const ctx = document.getElementById('agentChart').getContext('2d');
            const agentCounts = {};
            
            thoughtTrail.forEach(thought => {
                agentCounts[thought.agent] = (agentCounts[thought.agent] || 0) + 1;
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(agentCounts),
                    datasets: [{
                        label: 'Thoughts per Agent',
                        data: Object.values(agentCounts),
                        backgroundColor: [
                            '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4',
                            '#FFEAA7', '#DDA0DD', '#98D8C8', '#F7DC6F'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Filter by agent
        function filterByAgent() {
            const selectedAgent = document.getElementById('agent-filter').value;
            const filteredTrail = selectedAgent 
                ? thoughtTrail.filter(t => t.agent === selectedAgent)
                : thoughtTrail;
            
            renderTimeline(filteredTrail);
        }
        
        // Export functions
        function exportToJSON() {
            const dataStr = JSON.stringify(thoughtTrail, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'thought_trail.json';
            link.click();
        }
        
        function exportToCSV() {
            const headers = ['Timestamp', 'Agent', 'Thought', 'Data'];
            const csvContent = [
                headers.join(','),
                ...thoughtTrail.map(t => [
                    t.timestamp,
                    t.agent,
                    `"${t.thought.replace(/"/g, '""')}"`,
                    `"${JSON.stringify(t.data).replace(/"/g, '""')}"`
                ].join(','))
            ].join('\n');
            
            const dataBlob = new Blob([csvContent], {type: 'text/csv'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'thought_trail.csv';
            link.click();
        }
        
        // Toggle data preview
        function toggleDataPreview() {
            const previews = document.querySelectorAll('.data-preview');
            previews.forEach(preview => {
                preview.style.display = preview.style.display === 'none' ? 'block' : 'none';
            });
        }
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            calculateStats();
            populateAgentFilter();
            renderTimeline();
            createAgentChart();
        });
    </script>
</body>
</html>